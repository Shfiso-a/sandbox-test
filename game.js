(function(){const _0x1a8b=['input','getPixel','height','updated','150','mousemove','abs','get','getBoundingClientRect','addEventListener','type','clearRect','width','setPixel','swapPixels','gameCanvas','sand','water','stone','empty','wall','init','update','draw','mousedown','mouseup','mouseleave','DOMContentLoaded','sand-btn','water-btn','stone-btn','eraser-btn','reset-btn','brushSize','active','click'];(function(_0x3c1f9a,_0x5a8e){const _0x4b7c8e=function(_0x529a3e){while(--_0x529a3e){_0x3c1f9a['push'](_0x3c1f9a['shift']());}};_0x4b7c8e(++_0x5a8e);}(_0x1a8b,0x111));const _0x3b2a=function(_0x3c1f9a,_0x5a8e){_0x3c1f9a=_0x3c1f9a-0x0;let _0x4b7c8e=_0x1a8b[_0x3c1f9a];return _0x4b7c8e;};class _0x59c6e8{constructor(_0x1e8a93,_0x5c8e3e,_0x2d8a4f){this['canvas']=document['getElementById'](_0x1e8a93);this[_0x3b2a('0x1c')]=_0x5c8e3e;this[_0x3b2a('0x12')]=_0x2d8a4f;this['canvas'][_0x3b2a('0x1c')]=this[_0x3b2a('0x1c')];this['canvas'][_0x3b2a('0x12')]=this[_0x3b2a('0x12')];this['ctx']=this['canvas']['getContext']('2d');this['grid']=new Array(this[_0x3b2a('0x1c')]*this[_0x3b2a('0x12')]);this['imageData']=this['ctx']['createImageData'](this[_0x3b2a('0x1c')],this[_0x3b2a('0x12')]);this[_0x3b2a('0x0')_]();}init(){for(let _0x4f43e5=0x0;_0x4f43e5<this['grid']['length'];_0x4f43e5++){this['grid'][_0x4f43e5]={'type':_0x3b2a('0x1e'),'updated':![]};}}setPixel(_0x19a0e2,_0x3347f7,_0x4a7a87){if(_0x19a0e2<0x0||_0x19a0e2>=this[_0x3b2a('0x1c')]||_0x3347f7<0x0||_0x3347f7>=this[_0x3b2a('0x12')]){return;}const _0x576dbe=_0x3347f7*this[_0x3b2a('0x1c')]+_0x19a0e2;this['grid'][_0x576dbe]={'type':_0x4a7a87,'updated':![]};}getPixel(_0x322316,_0x2eab73){if(_0x322316<0x0||_0x322316>=this[_0x3b2a('0x1c')]||_0x2eab73<0x0||_0x2eab73>=this[_0x3b2a('0x12')]){return{'type':_0x3b2a('0x1f')};}return this['grid'][_0x2eab73*this[_0x3b2a('0x1c')]+_0x322316];}swapPixels(_0x546b5a,_0x373c2a,_0x4523b0,_0x3a4b9c){const _0x3560a6=_0x373c2a*this[_0x3b2a('0x1c')]+_0x546b5a;const _0x4d39c9=_0x3a4b9c*this[_0x3b2a('0x1c')]+_0x4523b0;const _0x12cf34=this['grid'][_0x3560a6];this['grid'][_0x3560a6]=this['grid'][_0x4d39c9];this['grid'][_0x4d39c9]=_0x12cf34;this['grid'][_0x3560a6][_0x3b2a('0x13')]=!![];this['grid'][_0x4d39c9][_0x3b2a('0x13')]=!![];}update(){for(let _0x3e18f8=0x0;_0x3e18f8<this['grid']['length'];_0x3e18f8++){this['grid'][_0x3e18f8][_0x3b2a('0x13')]=![];}for(let _0x4b7c8e=this[_0x3b2a('0x12')]-0x1;_0x4b7c8e>=0x0;_0x4b7c8e--){for(let _0x529a3e=0x0;_0x529a3e<this[_0x3b2a('0x1c')];_0x529a3e++){const _0x4f43e5=_0x4b7c8e*this[_0x3b2a('0x1c')]+_0x529a3e;const _0x19a0e2=this['grid'][_0x4f43e5];if(_0x19a0e2[_0x3b2a('0x13')]){continue;}switch(_0x19a0e2[_0x3b2a('0x1a')]){case _0x3b2a('0x1d'):this['updateSand'](_0x529a3e,_0x4b7c8e);break;case _0x3b2a('0x1e'):this[_0x3b2a('0x1f')](_0x529a3e,_0x4b7c8e);break;}}}}updateSand(_0x4b7c8e,_0x529a3e){const _0x4f43e5=this[_0x3b2a('0x11')](_0x4b7c8e,_0x529a3e+0x1);if(_0x4f43e5[_0x3b2a('0x1a')]==='empty'||_0x4f43e5[_0x3b2a('0x1a')]==='water'){this[_0x3b2a('0x1e')](_0x4b7c8e,_0x529a3e,_0x4b7c8e,_0x529a3e+0x1);return;}const _0x19a0e2=Math['random']()<0.5?0x1:-0x1;const _0x3347f7=this[_0x3b2a('0x11')](_0x4b7c8e-_0x19a0e2,_0x529a3e+0x1);if(_0x3347f7[_0x3b2a('0x1a')]==='empty'||_0x3347f7['type']==='water'){this[_0x3b2a('0x1e')](_0x4b7c8e,_0x529a3e,_0x4b7c8e-_0x19a0e2,_0x529a3e+0x1);return;}const _0x4a7a87=this[_0x3b2a('0x11')](_0x4b7c8e+_0x19a0e2,_0x529a3e+0x1);if(_0x4a7a87['type']==='empty'||_0x4a7a87[_0x3b2a('0x1a')]==='water'){this['swapPixels'](_0x4b7c8e,_0x529a3e,_0x4b7c8e+_0x19a0e2,_0x529a3e+0x1);}}updateWater(_0x140307,_0x2e06c7){const _0x5310e5=this[_0x3b2a('0x11')](_0x140307,_0x2e06c7+0x1);if(_0x5310e5[_0x3b2a('0x1a')]==='empty'){this[_0x3b2a('0x1e')](_0x140307,_0x2e06c7,_0x140307,_0x2e06c7+0x1);return;}let _0x4b3583=Math['random']()<0.5?0x1:-0x1;const _0x48a876=this['getPixel'](_0x140307-_0x4b3583,_0x2e06c7+0x1);if(_0x48a876[_0x3b2a('0x1a')]==='empty'){this[_0x3b2a('0x1e')](_0x140307,_0x2e06c7,_0x140307-_0x4b3583,_0x2e06c7+0x1);return;}const _0x1281c7=this[_0x3b2a('0x11')](_0x140307+_0x4b3583,_0x2e06c7+0x1);if(_0x1281c7['type']==='empty'){this[_0x3b2a('0x1e')](_0x140307,_0x2e06c7,_0x140307+_0x4b3583,_0x2e06c7+0x1);return;}const _0x296e8e=this[_0x3b2a('0x11')](_0x140307-_0x4b3583,_0x2e06c7);if(_0x296e8e[_0x3b2a('0x1a')]==='empty'){this[_0x3b2a('0x1e')](_0x140307,_0x2e06c7,_0x140307-_0x4b3583,_0x2e06c7);return;}const _0x498e59=this[_0x3b2a('0x11')](_0x140307+_0x4b3583,_0x2e06c7);if(_0x498e59[_0x3b2a('0x1a')]==='empty'){this['swapPixels'](_0x140307,_0x2e06c7,_0x140307+_0x4b3583,_0x2e06c7);}}draw(){const _0x496b12=this['imageData']['data'];for(let _0x534015=0x0;_0x534015<this['grid']['length'];_0x534015++){const _0x5a1811=this['grid'][_0x534015];const _0x4852e6=_0x534015*0x4;let _0x17c62b=0x0,_0x5a83bb=0x0,_0x33443a=0x0;switch(_0x5a1811[_0x3b2a('0x1a')]){case _0x3b2a('0x1d'):_0x17c62b=0xc2;_0x5a83bb=0xb2;_0x33443a=0x80;break;case _0x3b2a('0x1e'):_0x17c62b=0x40;_0x5a83bb=0x96;_0x33443a=0xff;break;case _0x3b2a('0x1f'):_0x17c62b=0x80;_0x5a83bb=0x80;_0x33443a=0x80;break;}_0x496b12[_0x4852e6]=_0x17c62b;_0x496b12[_0x4852e6+0x1]=_0x5a83bb;_0x496b12[_0x4852e6+0x2]=_0x33443a;_0x496b12[_0x4852e6+0x3]=0xff;}this['ctx']['putImageData'](this['imageData'],0x0,0x0);}}document[_0x3b2a('0x19')]('DOMContentLoaded',()=>{const _0x38b456=0x96;const _0x272ec8=new _0x59c6e8(_0x3b2a('0x1f'),_0x38b456,_0x38b456);let _0x5792d7=_0x3b2a('0x1d');let _0x3bd59e=0x5;let _0x310323=!_0x310323;const _0x2f5209=document['getElementById']('sand-btn');const _0x438682=document['getElementById']('water-btn');const _0x1991d9=document['getElementById']('stone-btn');const _0x2d19f8=document['getElementById']('eraser-btn');const _0x1f0e4b=document[_0x3b2a('0x17')](_0x3b2a('0xa'));const _0x55d14e=document[_0x3b2a('0x17')]('reset-btn');function _0x387340(_0x1e367c){[_0x2f5209,_0x438682,_0x1991d9,_0x2d19f8]['forEach'](_0x4b0d0a=>_0x4b0d0a['classList']['remove'](_0x3b2a('0xb')));_0x1e367c['classList']['add'](_0x3b2a('0xb'));}_0x2f5209['addEventListener']('click',()=>_0x5792d7='sand',_0x387340(_0x2f5209));_0x438682[_0x3b2a('0x19')]('click',()=>_0x5792d7='water',_0x387340(_0x438682));_0x1991d9[_0x3b2a('0x19')]('click',()=>_0x5792d7='stone',_0x387340(_0x1991d9));_0x2d19f8[_0x3b2a('0x19')]('click',()=>_0x5792d7='empty',_0x387340(_0x2d19f8));_0x55d14e[_0x3b2a('0x19')]('click',()=>_0x272ec8[_0x3b2a('0x0')_]());_0x1f0e4b[_0x3b2a('0x19')](_0x3b2a('0x10'),_0x2b3887=>_0x3bd59e=parseInt(_0x2b3887['target']['value'],0xa));function _0x48d70c(_0x19fb66){if(!_0x310323){return;}const _0x3a48e8=_0x272ec8['canvas'][_0x3b2a('0x18')]();const _0x4e0e5a=_0x272ec8['canvas'][_0x3b2a('0x1c')]/_0x3a48e8[_0x3b2a('0x1c')];const _0x5608de=_0x272ec8['canvas'][_0x3b2a('0x12')]/_0x3a48e8[_0x3b2a('0x12')];const _0x27b876=(_0x19fb66['clientX']-_0x3a48e8['left'])*_0x4e0e5a;const _0x33405c=(_0x19fb66['clientY']-_0x3a48e8['top'])*_0x5608de;const _0x34346e=_0x3bd59e;for(let _0x3b3a0c=-_0x34346e;_0x3b3a0c<=_0x34346e;_0x3b3a0c++){for(let _0x49f57c=-_0x34346e;_0x49f57c<=_0x34346e;_0x49f57c++){if(_0x3b3a0c*_0x3b3a0c+_0x49f57c*_0x49f57c<=_0x34346e*_0x34346e){const _0x1c7503=Math['floor'](_0x27b876+_0x3b3a0c);const _0x46427d=Math['floor'](_0x33405c+_0x49f57c);if(Math['random']()>0.3){_0x272ec8[_0x3b2a('0x1d')](_0x1c7503,_0x46427d,_0x5792d7);}}}}}}_0x272ec8['canvas']['addEventListener'](_0x3b2a('0x4'),_0x111623=>{_0x310323=!![];_0x48d70c(_0x111623);});_0x272ec8['canvas'][_0x3b2a('0x19')](_0x3b2a('0x5'),()=>_0x310323=![]);_0x272ec8['canvas'][_0x3b2a('0x19')](_0x3b2a('0x15'),_0x48d70c);_0x272ec8['canvas'][_0x3b2a('0x19')](_0x3b2a('0x6'),()=>_0x310323=![]);function _0x1e367c(){_0x272ec8[_0x3b2a('0x1')_]();_0x272ec8['draw']();requestAnimationFrame(_0x1e367c);}_0x1e367c();});}());
